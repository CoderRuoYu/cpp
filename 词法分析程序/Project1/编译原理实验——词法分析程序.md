# 编译原理实验——词法分析程序

## 1、程序功能介绍

此程序主要功能是将字符串类型的源码转换为**<id,valiue>**这样的二元组，以便后续的编译步骤能够更轻松地理解和处理源代码的结构和语法。

输入：

![微信截图_20231029191252](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029191252.png)

输出：

![微信截图_20231029191359](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029191359.png)

## 2、主要数据结构

1、使用string对象存放保留字并使用数组存放对应的id值

```C++
vector<string> reserve = { "void","int","float","double","if","else","for","do","while" };
const int num_reserve[] = { 2,3,4,5,6,7,8,9,10 };
```

2、使用string类对象管理字符串，便于向文件中打印

```c++
string temp("");
temp += ch;
fprintf(fp, "<%d,%s>", 11, temp.c_str());
```

## 3、程序主要内容以及调用关系

### 1、函数内容介绍

| 函数名称                           | 主要功能                                                     |
| ---------------------------------- | ------------------------------------------------------------ |
| int main();                        | 负责实际的词法分析工作，将源代码中的不同部分分类并输出到文件以供后续的语法分析或其他处理使用。 |
| int is_reserve(string& temp);      | 用于判断给定的字符串 `temp` 是否是保留字（关键字）。它会在预定义的保留字列表中查找 `temp`，如果找到匹配项，则返回相应的类别编码；否则返回0。 |
| int is_letter(char& ch);           | 用于判断一个字符 `ch` 是否是字母。如果字符是字母，它返回1，否则返回0。 |
| int is_number(char ch);            | 用于判断一个字符 `ch` 是否是数字。如果字符是数字，它返回1，否则返回0。 |
| int is_single_delimiter(char& ch); | 用于判断一个字符 `ch` 是否是单字符分界符。如果字符是单字符分界符，它返回1，否则返回0。 |

### 2、函数调用关系：`main` 函数内部调用函数来帮助判断字符的类型：

- `is_reserve` 用于判断是否是关键字。

- `is_letter` 用于判断是否是字母。

- `is_number` 用于判断是否是数字。

- `is_single_delimiter` 用于判断是否是单字符分界符。

### 程序的实现方法

> 该程序主要根据文法来写出程序,main函数通过从文件中不断的读出字符，进行类别的判断，最后输出二元组<id,value>到文件中

**改编后的文法如下：**

<单词符号>→<标识符>|<无符号整数>|<单字符分界符>|<双字符分界符>

 <标识符>→字母|<标识符>字母|<标识符>d

<无符号整数>→数字︱ <无符号整数>数字

<单字符分界符>→+ ︱－ ︱* ︱；︱, ︱(︱) ︱{︱}|/|!|>|<|=|&

<双字符分界符>→<大于>=︱<小于>=︱<感叹号>=︱<等于>=︱<斜竖>* |<加号>+|<减号>-|

<大于> >|<小于><|<加号>=|<减号>=|<乘号>=|<斜竖>=|<与>&|<竖线>| |

<小于>→< 

<等于>→= 

<大于>→> 

<斜竖> →/ 

<感叹号>→!

 <加号>→+

 <减号>→-

<乘号>→* 

 <与>→&

<竖线>→|

**每类字符的类别编码如下：**

| 单词符号     | 类别编码 |
| ------------ | -------- |
| 标识符       | 1        |
| void         | 2        |
| int          | 3        |
| float        | 4        |
| double       | 5        |
| if           | 6        |
| else         | 7        |
| for          | 8        |
| do           | 9        |
| while        | 10       |
| 无符号数     | 11       |
| 单字符分界符 | 12       |
| 双字节分界符 | 13       |

## 4、测试用例

   1、

输入：

![微信截图_20231029191252](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029191252.png)

输出：

![微信截图_20231029191359](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029191359.png)

2、

输入：

![微信截图_20231029193853](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029193853.png)

输出：

![20191024094635949](C:/Users/Lenovo/Pictures/博客截图/20191024094635949.png)

3、

输入：

![微信截图_20231029194738](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029194738.png)

输出：

![微信截图_20231029194750](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029194750.png)

4、

输入：

![微信截图_20231029194948](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029194948.png)

输出：

![微信截图_20231029195013](C:/Users/Lenovo/Pictures/博客截图/微信截图_20231029195013.png)
